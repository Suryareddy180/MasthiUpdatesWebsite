{% extends 'dashboards/base_dashboard.html' %}

{% block page_title %}Categories{% endblock %}
{% block breadcrumb %}Categories{% endblock %}

{% block dashboard_content %}
<div class="content-header">
    <div class="header-left">
        <h5 class="mb-0"><i class="fa-solid fa-folder text-warning"></i> All Categories</h5>
        <span class="record-count">{{ categories|length }} total</span>
    </div>
    <a href="{% url 'add_category' %}" class="btn-add">
        <i class="fa-solid fa-plus"></i> Add Category
    </a>
</div>

<div class="table-container">
    <table class="enhanced-table">
        <thead>
            <tr>
                <th style="width: 50px;">#</th>
                <th><i class="fa-solid fa-tag"></i> Category Name</th>
                <th><i class="fa-regular fa-calendar-plus"></i> Created</th>
                <th><i class="fa-regular fa-calendar-check"></i> Updated</th>
                <th><i class="fa-solid fa-newspaper"></i> Posts</th>
                <th style="width: 120px;"><i class="fa-solid fa-cog"></i> Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for category in categories %}
            <tr>
                <td class="row-number">{{ forloop.counter }}</td>
                <td class="category-name">
                    <span class="category-icon">
                        <i class="fa-solid fa-folder"></i>
                    </span>
                    {{ category.category_name }}
                </td>
                <td class="date-cell">{{ category.created_at|date:"M d, Y" }}</td>
                <td class="date-cell">{{ category.updated_at|date:"M d, Y" }}</td>
                <td>
                    <span class="post-count-badge">
                        {{ category.blog_set.count }} posts
                    </span>
                </td>
                <td class="actions-cell">
                    <a href="{% url 'edit_category' category.id %}" class="action-btn edit" title="Edit">
                        <i class="fa-solid fa-edit"></i>
                    </a>
                    <form method="post" action="{% url 'delete_category' category.id %}" style="display: inline;"
                        onsubmit="return confirm('Are you sure you want to delete this category? All posts in this category will also be deleted.');">
                        {% csrf_token %}
                        <button type="submit" class="action-btn delete" title="Delete">
                            <i class="fa-solid fa-trash"></i>
                        </button>
                    </form>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" class="empty-state">
                    <div class="empty-icon">
                        <i class="fa-solid fa-folder-open"></i>
                    </div>
                    <p>No categories found</p>
                    <a href="{% url 'add_category' %}" class="btn-add-small">
                        <i class="fa-solid fa-plus"></i> Create your first category
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>


{% endblock %}
{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/dashboard-pages.css' %}">
{% endblock %}

{% block content %}
<div class="dashboard-layout">
    <div class="row g-0">

        <!-- Dashboard Sidebar -->
        <div class="col-lg-3 col-md-4">
            <div class="dashboard-sidebar">

                <!-- Sidebar Header -->
                <div class="sidebar-header">
                    <div class="sidebar-brand">
                        <i class="fas fa-gauge-high"></i>
                        <span>DASHBOARD</span>
                    </div>
                    <p class="sidebar-user">
                        <i class="fas fa-user-circle"></i>
                        Welcome, <strong>{{ request.user.username }}</strong>
                    </p>
                </div>

                <!-- Navigation -->
                <nav class="sidebar-nav">
                    <div class="nav-section">
                        <span class="nav-section-title">MENU</span>

                        <a href="{% url 'dashboard' %}"
                            class="sidebar-link {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">
                            <i class="fas fa-home"></i>
                            <span>Dashboard</span>
                            <i class="fas fa-chevron-right arrow"></i>
                        </a>

                        {% if perms.auth.view_user %}
                        <a href="{% url 'users' %}"
                            class="sidebar-link {% if request.resolver_match.url_name == 'users' %}active{% endif %}">
                            <i class="fas fa-users"></i>
                            <span>Users</span>
                            <i class="fas fa-chevron-right arrow"></i>
                        </a>
                        {% endif %}

                        {% if perms.blogs.view_category %}
                        <a href="{% url 'categories' %}"
                            class="sidebar-link {% if request.resolver_match.url_name == 'categories' %}active{% endif %}">
                            <i class="fas fa-folder"></i>
                            <span>Categories</span>
                            <i class="fas fa-chevron-right arrow"></i>
                        </a>
                        {% endif %}

                        {% if perms.blogs.view_blog %}
                        <a href="{% url 'posts' %}"
                            class="sidebar-link {% if request.resolver_match.url_name == 'posts' %}active{% endif %}">
                            <i class="fas fa-newspaper"></i>
                            <span>Posts</span>
                            <i class="fas fa-chevron-right arrow"></i>
                        </a>
                        {% endif %}
                    </div>

                    <div class="nav-section">
                        <span class="nav-section-title">QUICK LINKS</span>

                        {% if perms.blogs.add_blog %}
                        <a href="{% url 'add_post' %}" class="sidebar-link">
                            <i class="fas fa-plus-circle"></i>
                            <span>Add New Post</span>
                            <i class="fas fa-arrow-right arrow"></i>
                        </a>
                        {% endif %}

                        {% if perms.blogs.add_category %}
                        <a href="{% url 'add_category' %}" class="sidebar-link">
                            <i class="fas fa-folder-plus"></i>
                            <span>Add Category</span>
                            <i class="fas fa-arrow-right arrow"></i>
                        </a>
                        {% endif %}

                        <a href="{% url 'home' %}" class="sidebar-link">
                            <i class=" fas fa-globe"></i>
                            <span>View Website</span>
                            <i class="fas fa-external-link arrow"></i>
                        </a>
                    </div>

                    <div class="nav-section mt-auto">
                        <a href="{% url 'logout' %}" class="sidebar-link logout-link">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>Logout</span>
                        </a>
                    </div>
                </nav>
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-lg-9 col-md-8">
            <div class="dashboard-main">

                <!-- Top Bar -->
                <div class="dashboard-topbar">
                    <div class="topbar-left">
                        <h1 class="page-title">
                            {% block page_title %}Dashboard{% endblock %}
                        </h1>
                        <nav class="breadcrumb-nav">
                            <a href="{% url 'dashboard' %}">Home</a>
                            <i class="fas fa-chevron-right"></i>
                            <span>{% block breadcrumb %}Dashboard{% endblock %}</span>
                        </nav>
                    </div>
                    <div class="topbar-right">
                        <span class="current-date">
                            <i class="fas fa-calendar"></i>
                            <span id="currentDate"></span>
                        </span>
                    </div>
                </div>

                <!-- Content Area -->
                <div class="dashboard-content">
                    {% block dashboard_content %}{% endblock %}
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Display current date
    const displayOptions = { weekday: 'long', year: 'numeric', month: 'short', day: 'numeric' };
    document.getElementById('currentDate').textContent = new Date().toLocaleDateString('en-US', displayOptions);
</script>
{% endblock %}
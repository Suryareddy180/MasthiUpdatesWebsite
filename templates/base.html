{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Masthi Updates | Cinema News & Entertainment</title>
    <meta name="description"
        content="Your ultimate destination for cinema news, reviews, and entertainment updates from around the world.">

    <!-- Bootstrap -->
    <link href="https://getbootstrap.com/docs/4.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Poppins:wght@400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="{% static 'css/blog.css' %}" rel="stylesheet">
    <link href="{% static 'css/homepage-cinematic.css' %}" rel="stylesheet">
    <link href="{% static 'css/slideshow-netflix-style.css' %}" rel="stylesheet">
    <link href="{% static 'css/advanced-ui.css' %}" rel="stylesheet">
    <link href="{% static 'css/advanced-ui.css' %}" rel="stylesheet">
    <link href="{% static 'css/professional-header-footer.css' %}" rel="stylesheet">

    {% block extra_css %}{% endblock %}
</head>


<body>

    <!-- ================= ENHANCED HEADER ================= -->
    <header class="site-header" id="siteHeader">
        <div class="container">
            <div class="row align-items-center header-row">

                <!-- Logo & Brand -->
                <div class="col-5 col-sm-4 col-md-3">
                    <a href="{% url 'home' %}" class="header-logo">
                        <img src="{% static 'images/logo.png' %}" class="logo-img" alt="Logo">
                        <div class="brand-info">
                            <span class="brand-name">MASTHI UPDATES</span>
                            <span class="brand-tagline d-none d-lg-block">
                                <i class="fa-solid fa-film"></i> For Movie Lovers
                            </span>
                        </div>
                    </a>
                </div>

                <!-- Search Bar -->
                <div class="col-md-5 d-none d-md-block">
                    <form action="{% url 'search' %}" method="get" class="search-form">
                        <div class="search-box">
                            <i class="fa-solid fa-search search-icon"></i>
                            <input type="text" class="search-input" name="keyword" placeholder="Search movies, news..."
                                autocomplete="off">
                            <button type="submit" class="search-btn">Go!</button>
                        </div>
                    </form>
                </div>

                <!-- Actions -->
                <div class="col-7 col-sm-8 col-md-4 d-flex justify-content-end align-items-center">
                    <div class="header-actions">



                        <!-- Theme Toggle -->
                        <button id="themeToggle" class="action-btn" title="Toggle Theme">
                            <i class="fa-solid fa-moon"></i>
                        </button>

                        {% if user.is_authenticated %}
                        <!-- Visit Site (Only shown in Dashboard) -->
                        {% if '/dashboard/' in request.path %}
                        <a href="{% url 'home' %}" class="action-btn-link" title="Visit Site">
                            <i class="fa-solid fa-earth-americas"></i>
                            <span class="d-none d-xl-inline">Visit Site</span>
                        </a>
                        {% endif %}

                        <!-- Dashboard (Only shown on Website) -->
                        {% if '/dashboard/' not in request.path %}
                        <a href="{% url 'dashboard' %}" class="action-btn-link" title="Dashboard">
                            <i class="fa-solid fa-gauge-high"></i>
                            <span class="d-none d-xl-inline">Dashboard</span>
                        </a>
                        {% endif %}
                        <!-- Logout -->
                        <a href="{% url 'logout' %}" class="action-btn-link logout" title="Logout">
                            <i class="fa-solid fa-sign-out-alt"></i>
                            <span class="d-none d-xl-inline">Logout</span>
                        </a>
                        {% else %}
                        <!-- Login/Register -->
                        <a href="{% url 'login' %}" class="auth-btn login">Log In</a>
                        <a href="{% url 'register' %}" class="auth-btn register">Sign Up</a>
                        {% endif %}

                        <!-- Mobile Search Toggle -->
                        <button class="action-btn d-md-none ml-2" id="mobileSearchToggle">
                            <i class="fa-solid fa-search"></i>
                        </button>
                    </div>
                </div>

            </div>

            <!-- Mobile Search -->
            <div class="row mt-2 d-md-none" id="mobileSearchRow" style="display: none !important;">
                <div class="col-12">
                    <form action="{% url 'search' %}" method="get" class="search-form">
                        <div class="search-box">
                            <i class="fa-solid fa-search search-icon"></i>
                            <input type="text" class="search-input" name="keyword" placeholder="Search...">
                            <button type="submit" class="search-btn">Go!</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- ================= CATEGORIES ================= -->
        {% if '/dashboard/' not in request.path and '/login/' not in request.path and '/register/' not in request.path %}
        {% if categories %}
        <div class="nav-scroller mb-3 mb-lg-4 position-relative">
            <nav class="nav d-flex flex-nowrap">
                <a href="{% url 'home' %}" class="nav-link">
                    <i class="fa-solid fa-house"></i>
                    <span class="d-none d-sm-inline">Home</span>
                    <span class="d-sm-none">Home</span>
                </a>
                {% for cat in categories %}
                <a href="{% url 'posts_by_category' cat.id %}" class="nav-link">
                    <i class="fa-solid fa-clapperboard d-none d-lg-inline"></i>
                    {{ cat.category_name }}
                </a>
                {% endfor %}
            </nav>
        </div>
        {% endif %}
        {% endif %}


        {% block content %}{% endblock %}

    </div>

    <!-- ================= ENHANCED FOOTER ================= -->
    <footer class="site-footer">
        <div class="footer-content">
            <div class="container">
                <div class="row">

                    <!-- Brand & About -->
                    <div class="col-lg-4 col-md-6 mb-4">
                        <div class="footer-brand">
                            <img src="{% static 'images/logo.png' %}" alt="Logo" class="footer-logo">
                            <h4>MASTHI UPDATES</h4>
                        </div>
                        <p class="footer-desc">
                            For movie lovers across India - bringing you cinema updates in English, Telugu, Tamil,
                            Hindi, Kannada, Malayalam, and more regional languages.
                        </p>
                    </div>

                    <!-- Quick Links -->
                    <div class="col-lg-3 col-md-6 mb-4">
                        <h5 class="footer-title">Quick Links</h5>
                        <ul class="footer-links">
                            <li><a href="{% url 'home' %}"><i class="fa-solid fa-angle-right"></i> Home</a></li>
                            <li><a href="{% url 'search' %}"><i class="fa-solid fa-angle-right"></i> Search</a></li>
                            <li><a href="{% url 'terms' %}"><i class="fa-solid fa-angle-right"></i> Terms</a></li>
                            {% if user.is_authenticated %}
                            <li><a href="{% url 'dashboard' %}"><i class="fa-solid fa-angle-right"></i> Dashboard</a>
                            </li>
                            {% else %}
                            <li><a href="{% url 'login' %}"><i class="fa-solid fa-angle-right"></i> Login</a></li>
                            <li><a href="{% url 'register' %}"><i class="fa-solid fa-angle-right"></i> Register</a></li>
                            {% endif %}
                        </ul>
                    </div>



                    <!-- Categories & Connect -->
                    <div class="col-lg-5 col-lg-5 col-md-12 mb-4">
                        <div class="row">
                            <!-- Categories -->
                            <div class="col-sm-6 mb-4 mb-sm-0">
                                <h5 class="footer-title">Categories</h5>
                                <ul class="footer-links">
                                    {% for cat in categories %}
                                    {% if forloop.counter <= 6 %} <li><a href="{% url 'posts_by_category' cat.id %}"><i
                                                class="fa-solid fa-angle-right"></i> {{ cat.category_name }}</a></li>
                                        {% endif %}
                                        {% endfor %}
                                </ul>
                            </div>

                            <!-- Connect -->
                            <div class="col-sm-6">
                                <h5 class="footer-title">Connect With Us</h5>
                                <div class="social-links-compact">
                                    <a></a>
                                    <a href="https://www.instagram.com/masthi__updates" target="_blank" rel="noopener"
                                        class="social-compact instagram" title="Instagram">
                                        <i class="fa-brands fa-instagram"></i>
                                    </a>
                                    <a href="https://youtube.com/@cine_muchatluu" target="_blank" rel="noopener"
                                        class="social-compact youtube" title="YouTube">
                                        <i class="fa-brands fa-youtube"></i>
                                    </a>
                                    <a href="https://x.com/cine_muchatlu" target="_blank" rel="noopener"
                                        class="social-compact twitter" title="Twitter">
                                        <i class="fa-brands fa-x-twitter"></i>
                                    </a>

                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <!-- Footer Bottom -->
        <div class="footer-bottom">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-6 text-center text-md-left mb-2 mb-md-0">
                        <p>&copy; <span id="year"></span> Masthi Updates. All rights reserved.</p>
                    </div>
                    <div class="col-md-6 text-center text-md-right">
                        <p>Made with <i class="fa-solid fa-heart pulse-heart"></i> for Cinema Lovers</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- ================= SCRIPTS ================= -->
    <script>
        // Theme Toggle
        const toggleBtn = document.getElementById("themeToggle");
        const body = document.body;

        // Default to dark mode if no theme is saved
        const savedTheme = localStorage.getItem("theme") || "dark";
        if (savedTheme === "dark") {
            body.classList.add("dark-mode");
            toggleBtn.innerHTML = '<i class="fa-regular fa-lightbulb"></i>';
        } else {
            body.classList.remove("dark-mode");
            toggleBtn.innerHTML = '<i class="fa-solid fa-moon"></i>';
        }

        toggleBtn.addEventListener("click", () => {
            body.classList.toggle("dark-mode");
            localStorage.setItem(
                "theme",
                body.classList.contains("dark-mode") ? "dark" : "light"
            );
            toggleBtn.innerHTML = body.classList.contains("dark-mode")
                ? '<i class="fa-regular fa-lightbulb"></i>'
                : '<i class="fa-solid fa-moon"></i>';
        });

        // Mobile Search Toggle
        const mobileSearchToggle = document.getElementById("mobileSearchToggle");
        const mobileSearchRow = document.getElementById("mobileSearchRow");

        if (mobileSearchToggle && mobileSearchRow) {
            mobileSearchToggle.addEventListener("click", () => {
                if (mobileSearchRow.style.display === "none !important" ||
                    mobileSearchRow.style.display === "none" ||
                    !mobileSearchRow.style.display) {
                    mobileSearchRow.style.display = "flex";
                    mobileSearchRow.querySelector(".search-input").focus();
                } else {
                    mobileSearchRow.style.display = "none";
                }
            });
        }

        // Header scroll adaptation
        const siteHeader = document.getElementById("siteHeader");
        if (siteHeader) {
            window.addEventListener("scroll", () => {
                if (window.scrollY > 50) {
                    siteHeader.classList.add("scrolled");
                } else {
                    siteHeader.classList.remove("scrolled");
                }
            });
        }

        // Year in footer
        document.getElementById("year").textContent = new Date().getFullYear();
    </script>

    <!-- Bootstrap JS for Dropdowns -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Other Scripts -->
    <script>
        // Notification Bell Click
        document.getElementById('notifBtn')?.addEventListener('click', function () {
            alert('Notifications feature coming soon! \u26a1\n\nStay tuned for:\n\u2022 Breaking news alerts\n\u2022 New release notifications\n\u2022 Personalized updates');
        });
    </script>

</body>

</html>
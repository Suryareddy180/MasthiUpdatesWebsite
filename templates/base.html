{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Masthi Updates</title>

    <!-- Bootstrap -->
    <link href="https://getbootstrap.com/docs/4.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="{% static 'css/blog.css' %}" rel="stylesheet">
</head>

<body>

    <div class="container">

        <!-- ================= HEADER ================= -->
        <header class="blog-header py-2 py-md-3 mb-3">
            <div class="row align-items-center header-row">

                <!-- Logo -->
                <div class="col-6 col-sm-4 col-md-3">
                    <a href="{% url 'home' %}" class="blog-header-logo">
                        <img src="{% static 'images/logo.png' %}" class="site-logo" alt="Masthi Updates Logo">
                        <span class="brand-text">MASTHI UPDATES</span>
                    </a>
                </div>

                <!-- SEARCH (center on md+) -->
                <div class="col-md-5 d-none d-md-block">
                    <form action="{% url 'search' %}" method="get" class="header-search-form">
                        <div class="header-search">
                            <i class="fa-solid fa-magnifying-glass search-icon"></i>
                            <input type="text" class="search-input" name="keyword"
                                placeholder="Search movies, news, reviewsâ€¦">
                            <button type="submit" class="search-button">
                                <i class="fa-solid fa-magnifying-glass"></i> Go!
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Action Buttons -->
                <div class="col-6 col-sm-8 col-md-4 d-flex justify-content-end align-items-center gap-2">
                    <!-- Theme Toggle (always visible) -->
                    <button id="themeToggle" class="btn btn-sm btn-light">
                        <i class="fa-solid fa-moon"></i>
                    </button>

                    <!-- Search icon for mobile (opens search) -->
                    <button class="btn btn-sm btn-light d-md-none" id="mobileSearchToggle">
                        <i class="fa-solid fa-magnifying-glass"></i>
                    </button>

                    <!-- Login (visible on sm+) -->
                    <a href="#" class="btn btn-sm btn-warning d-none d-sm-inline-flex align-items-center">
                        <i class="fa-solid fa-arrow-right-to-bracket"></i>
                        <span class="d-none d-lg-inline ms-1">Login</span>
                    </a>

                    <!-- Register (visible on lg+) -->
                    <a href="#" class="btn btn-sm btn-outline-secondary d-none d-lg-inline-flex align-items-center">
                        <i class="fa-solid fa-user-plus"></i>
                        <span class="ms-1">Register</span>
                    </a>
                </div>

            </div>

            <!-- Mobile Search (expandable) -->
            <div class="row mt-2 d-md-none" id="mobileSearchRow" style="display: none !important;">
                <div class="col-12">
                    <form action="{% url 'search' %}" method="get" class="header-search-form">
                        <div class="header-search">
                            <i class="fa-solid fa-magnifying-glass search-icon"></i>
                            <input type="text" class="search-input" name="keyword" placeholder="Searchâ€¦">
                            <button type="submit" class="search-button">
                                <i class="fa-solid fa-magnifying-glass"></i> Go!
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </header>

        <!-- ================= CATEGORIES ================= -->
        {% if categories %}
        <div class="nav-scroller mb-4">
            <nav class="nav flex-wrap justify-content-center justify-content-md-between">
                {% for cat in categories %}
                <a href="{% url 'posts_by_category' cat.id %}">
                    <i class="fa-solid fa-clapperboard"></i>
                    {{ cat.category_name }}
                </a>
                {% endfor %}
            </nav>
        </div>
        {% endif %}

        {% block content %}{% endblock %}

    </div>

    <!-- ================= FOOTER (STATIC FOLLOW US) ================= -->
    <footer class="blog-footer">
        <div class="footer-inner">

            <h4 class="footer-title">
                Masthi Updates
                <span class="footer-underline"></span>
            </h4>

            <!-- FOLLOW US (STATIC) -->
            <div class="footer-socials">
                <a href="https://www.instagram.com/masthi__updates" target="_blank" aria-label="Instagram">
                    <i class="fa-brands fa-instagram"></i>
                </a>

                <a href="https://youtube.com/@cine_muchatluu" target="_blank" aria-label="YouTube">
                    <i class="fa-brands fa-youtube"></i>
                </a>

                <a href="https://x.com/cine_muchatlu" target="_blank" aria-label="X (Twitter)">
                    <i class="fa-brands fa-x-twitter"></i>
                </a>
            </div>

            <p class="footer-copy">
                Â© <span id="year"></span> Masthi Updates Â· Built with
                <i class="fa-solid fa-heart"></i> for Cinema Lovers ðŸŽ¬
            </p>

        </div>

        <div class="footer-grain"></div>
    </footer>

    <!-- ================= SCRIPTS ================= -->
    <script>
        // Theme Toggle
        const toggleBtn = document.getElementById("themeToggle");
        const body = document.body;

        const savedTheme = localStorage.getItem("theme") || "light";
        if (savedTheme === "dark") {
            body.classList.add("dark-mode");
            toggleBtn.innerHTML = '<i class="fa-solid fa-sun"></i>';
        }

        toggleBtn.addEventListener("click", () => {
            body.classList.toggle("dark-mode");
            localStorage.setItem(
                "theme",
                body.classList.contains("dark-mode") ? "dark" : "light"
            );
            toggleBtn.innerHTML = body.classList.contains("dark-mode")
                ? '<i class="fa-solid fa-sun"></i>'
                : '<i class="fa-solid fa-moon"></i>';
        });

        // Mobile Search Toggle
        const mobileSearchToggle = document.getElementById("mobileSearchToggle");
        const mobileSearchRow = document.getElementById("mobileSearchRow");

        if (mobileSearchToggle && mobileSearchRow) {
            mobileSearchToggle.addEventListener("click", () => {
                if (mobileSearchRow.style.display === "none !important" ||
                    mobileSearchRow.style.display === "none" ||
                    !mobileSearchRow.style.display) {
                    mobileSearchRow.style.display = "flex";
                    mobileSearchRow.querySelector(".search-input").focus();
                } else {
                    mobileSearchRow.style.display = "none";
                }
            });
        }

        // Year in footer
        document.getElementById("year").textContent = new Date().getFullYear();
    </script>

</body>

</html>